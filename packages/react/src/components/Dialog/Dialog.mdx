import { Meta, Primary, Controls, Canvas, ArgTypes } from '@storybook/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/dialog.css?inline';
import * as DialogStories from './Dialog.stories';

import { Dialog } from './';

<Meta of={DialogStories} />

# Dialog

`Dialog` bruker native `dialog` elementet, du kan enten bruke vår `Trigger` komponent eller `ref` for å åpne modalen.
Dersom du trenger kontroll over når modalen lukkes, må du bruke `ref`.
Les [MDN Docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog) for mer info.

Du ender mellom non-modal og modal dialoger ved å bruke proppen `modal`, som er standard satt til `true`.
Vi overstyrer hvordan `open` fungerer basert på `modal`-proppen.

`Dialog` har native focus trap, som betyr at brukeren ikke kan tabbe til annet innhold på siden.

<Primary />
<Controls />

## Slik bruker du `Dialog`

```tsx
<Dialog.TriggerContext>
  <Dialog.Trigger>Open Dialog</Dialog.Trigger>
  <Dialog>
    <Dialog.Block>
      <Heading data-size="xs">Header</Heading>
    </Dialog.Block>
    <Dialog.Block>Content</Dialog.Block>
    <Dialog.Block>Footer</Dialog.Block>
  </Dialog>
</Dialog.TriggerContext>
```

## Bruk med eksten trigger

Dersom du vil bruke en ekstern trigger, som for eksempel ligger en annen plass i treet, kan du bruke `ref` for å åpne dialogen.

```tsx
const dialogRef = useRef<HTMLDialogElement>(null);

...

<Button onClick={() => dialogRef.current?.showDialog()}>Open Dialog</Button>
<Dialog ref={dialogRef}>
  Content
</Dialog>
```

### Med bruk av `ref`

<Canvas of={DialogStories.WithoutDialogTriggerContext} />

### Close on backdrop click

Vi bruker `backdropClose={true}` proppen for å lukke dialogen når brukeren klikker utenfor.

<Canvas of={DialogStories.BackdropClose} />

### Med `Block`

Bruk flere `Dialog.Block` hvis du vil dele opp dialogen med skillelinjer til for eksempel topp- og bunn-område.
Merk at innhold kan ikke plasseres direkte i `Dialog` dersom du bruker `Dialog.Block`; da burde alt innholdet være inni en av av dialogen `Dialog.Block`-seksjoner.

<Canvas of={DialogStories.WithHeaderAndFooter} />

### Form

Vi bruker native `autoFocus` på `Textfield` for å fokusere inputen i skjemaet.

<Canvas of={DialogStories.DialogWithForm} />

### Med egendefinert bredde

Bruk `max-width` for å sette egendefinert maks bredde på dialogen. Default er 40rem.

<Canvas of={DialogStories.DialogWithMaxWidth} />

### Innhold som går utenfor Dialogen

Bruk `overflow: visible` for å la innhold gå utenfor dialogen.

<Canvas of={DialogStories.DialogWithCombobox} />

### `Dialog.Block`

<ArgTypes of={Dialog.Block} />

## CSS Variabler

<CssVariables css={css} />
