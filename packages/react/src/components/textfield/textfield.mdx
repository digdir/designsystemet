import { Meta, Canvas, Controls, Primary } from '@storybook/addon-docs/blocks';
import * as TextfieldStories from './textfield.stories';

<Meta of={TextfieldStories} />

# Textfield

  `Textfield` gir brukere muligheten til å skrive fritekst eller tall. 

<Primary />
<Controls />

## Bruk
`Textfield` bruker [`Field`](/docs/komponenter-field--docs)-komponenten, slik at `Textfield` kan brukes enten som [`input`](/docs/komponenter-input--docs) eller [`textarea`](/docs/komponenter-textarea--docs). Du bytter mellom de ved å sette `multiline={true/false}`. **OBS:** Ikke legg [`Field`](/docs/komponenter-field--docs) rundt `Textfield`, siden den allerede benytter [`Field`](/docs/komponenter-field--docs)-komponenten.

```tsx
import { Textfield } from '@digdir/designsystemet-react';

<Textfield label="Navn" />
```
## Eksempler

### Multiline

Du endrer til `textarea` ved å sette `multiline` til `true`. Da kan brukerne skrive lengre tekster.

<Canvas of={TextfieldStories.Rows} />

### Prefix/Suffix

Prefixer og suffixer er nyttige for å vise enheter, valuta eller annen informasjon som er relevant for feltet. Disse skal **ikke** brukes uten `label`, da skjermlesere ikke leser dem opp. Det er viktig at samme informasjon som vises i prefixet eller suffixet, også inkluderes i ledeteksten.

<Canvas of={TextfieldStories.Affix} />

### Antall tegn

Bruk `counter` til å informere om antall tegn brukerne kan skrive i feltet.

<Canvas of={TextfieldStories.Counter} />

### Kontrollert

<Canvas of={TextfieldStories.Controlled} />

### Påkrevde og valgfrie felt

Det er lovpålagt å markere feltene dine, du kan lese vårt mønster om [obligatoriske og valgfrie felt](https://designsystemet.no/no/patterns/required-and-optional-fields) for mer informasjon.
Når du plasserer `Tag` i `<label>` anbefaler vi at du bruker `margin-inline-start: var(--ds-size-2)` for å skape avstand mellom teksten og taggen.

<Canvas of={TextfieldStories.Required} />


## Retningslinjer
`Input` er egnet til korte tekster og svar. `Textarea` er egnet til mer utfyllende og lengre svar. 

### Unngå plassholdertekster

Plassholdertekster (`placeholder`) forsvinner når brukerne skriver i feltet. Det er derfor bedre å inkludere hint og viktig informasjon i selve ledeteksten eller den tilhørende beskrivelsen. Kontrastkravene i WCAG gjelder for `placeholder` også, og da blir teksten så mørk at brukerne kan oppfatte `textfield` som utfylt.

### Tilpass bredden på tekstfeltet

Tilpass bredden etter hva brukerne skal skrive inn, kort bredde for telefonnummer og bredere for stedsnavn. Ulik bredde på feltene gjør det lettere å navigere i skjemaer med mange felt.

### Tillat kopier og lim inn

Brukere som skal fylle ut et tekstområde, trenger ofte å kopiere og lime inn informasjon, så denne funksjonen må ikke deaktiveres. Dette gjør det enkelt for brukerne å fylle inn nødvendige opplysninger uten begrensninger.

### Inndata
For å sikre en god brukeropplevelse er det viktig å bruke en kombinasjon av riktig `input`-type og `autocomplete`-attributter. Les mer om [autocomplete på MDN Webdocs](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/autocomplete).

- Tillat variasjoner i hvordan data skrives inn, så lenge informasjonen er forståelig. For eksempel bør telefonnumre kunne inneholde mellomrom, personnumre punktum, og e-postadresser aksepteres selv om de har et mellomrom til slutt.
- Pass på at brukerne ser inndata som formateres automatisk, men uten at det forstyrrer dem mens de fyller ut.

#### Formål med inndata
Autocomplete er påkrevd i felter der formålet finnes i den forhåndsdefinerte listen beskrevet i [1.3.5 formål med inndata (uutilsynet.no)](https://www.uutilsynet.no/wcag-standarden/135-identifiser-formal-med-inndata-niva-aa/142).
Det hjelper nettlesere og hjelpemidler med å gjenkjenne og fylle ut personopplysninger automatisk.

- Bruk `autocomplete` bare når feltet samsvarer med den forhåndsdefinert listen som er gjengitt på UUtilsynets sider. (For eksempel `given name`, `email` eller `address-line1`)
- Hvis feltet gjelder **en annen person en brukeren**, skal du sette `autocomplete="off"`. Dersom alle felt trenger `autocomplete="off"` kan du sette dette på et overordnet `form`-element. Alle `input`, `select` og `textarea` arver fra overordna `form`-element.

#### Input type
- Velg inputtyper som samsvarer med informasjonen du ber om, for eksempel `tel`, `search` eller `email`. Dette gir mobilbrukere et tilpasset tastatur, men vær oppmerksom på at enkelte inputtyper kan aktivere klientsidevalidering. 
- Unngå `type="number"` med mindre du har brukerinnsikt som viser at det fungerer godt. Denne typen kan fjerne nuller, endre verdier ved scrolling, skape problemer for skjermlesere og runde lange tall. Bruk heller `type="text"` med `inputmode="numeric"` for bedre tilgjengelighet. [Hvorfor Gov.uk endret input type for nummer (Gov.uk)](https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/)





## Tekst

Det skal alltid være ledetekst på `Textfield`. 

- Hold ledeteksten kort, unngå at den går over to linjer
- Unngå å legge til beskrivelse som ikke er relevant eller meningsfull for brukeren
- Unngå å bruke kolon etter `label`


## Tilgjengelighet

### Ikke bruk deaktiverte felt

Ikke bruk deaktivert tilstand (`disabled`) på tekstfelt. Tenk heller over om du trenger å vise feltet i det hele tatt, eller om du heller kan skrive informasjonen ut i ren tekst eller bruke `readonly`.

### Prefiks og suffiks

Prefiks og suffiks er et ekstra visuelt hjelpemiddel, som blir ignorert av skjermlesere. Vi må alltid ha en beskrivende ledetekst. Prefiks og suffiks er plassert utenfor inndatafeltene de tilhører. Da unngår vi at de ikke skaper trøbbel i noen nettlesere, som kan sette inn et ikon i inndatafeltet (for eksempel ikoner for å vise eller lage passord).
