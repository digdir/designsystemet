import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';
import { CssVariables } from '@doc-components';
import css from '@digdir/designsystemet-css/textfield.css?inline';
import * as TextfieldStories from './Textfield.stories';

<Meta of={TextfieldStories} />

# Textfield

 Textfield er en samensatt komponent for [`input`](/docs/komponenter-input--docs) og [`textarea`](/docs/komponenter-textarea--docs). Du bytter mellom de ved å sette `multiline={true/false}`. `Textfield` har også innebygd `label`, `description`, `validationmessage`, `affix` og `counter`.
<br/>


<Primary />
<Controls />

## Slik bruker du Textfield

```tsx
import { Textfield } from '@digdir/designsystemet-react';

<Textfield label="Navn" />
```
## Eksempler

### Multiline

Du endrer til `textarea` ved å sette `multiline` til `true`. Da kan brukerne skrive lengre tekster.

<Canvas of={TextfieldStories.Rows} />

### Prefix/Suffix

Prefixer og suffixer er nyttige for å vise enheter, valuta eller annen informasjon som er relevant for feltet. Disse skal **ikke** brukes alene, da skjermlesere ikke leser dem opp. Det er viktig at samme informasjon som vises i prefixet eller suffixet, også inkluderes i ledeteksten.

<Canvas of={TextfieldStories.Affix} />

### Antall tegn

Bruk `counter` til å begrense antall tegn brukerne kan skrive i feltet.

<Canvas of={TextfieldStories.Counter} />

### Kontrollert

<Canvas of={TextfieldStories.Controlled} />


## Retningslinjer for når du skal bruke `Textfield`
`Textfield` er egnet til korte tekster/svar. `Textarea` er egnet til mer utfyllende og lengre svar. 

### Plassering av ledeteksten

Ledeteksten og eventuell beskrivelse skal alltid stå over tekstfeltet. Dette gjør dem lette å se på små skjermer og hindres ikke av eventuelle feilmeldinger.

### Unngå plassholdertekster

Plassholdertekster forsvinner når brukerne skriver i feltet. Det er derfor bedre å inkludere hint og viktig informasjon i selve ledeteksten eller den tilhørende beskrivelsen. Kontrastkravene i WCAG gjelder for `placeholder` også, og da blir teksten så mørk at brukerne kan oppfatte `textfield` som utfylt.

### Tilpass bredden på tekstfeltet

Tilpass bredden etter hva brukerne skal skrive inn - kort bredde for telefonnummer og bredere for stedsnavn. Ulik bredde på feltene gjør det lettere å navigere i skjemaer med mange felter.

### Tillat kopier og lim inn

Brukere som skal fylle ut et tekstområde, trenger ofte å kopiere og lime inn informasjon, så denne funksjonen må ikke deaktiveres. Dette gjør det enkelt for brukerne å fylle inn nødvendige opplysninger uten begrensninger.

### Inndata og formatering

- Bruk `autoComplete` for felter som mottar personlig informasjon. Hvis feltet skal be om personopplysninger om en annen person enn brukeren, må du skru `autoComplete` av (WCAG 1.3.5).
- Bruk gjerne inndatatyper som viser hva du ber om, for eksempel telefonnummer og e-post. Slike inndatatyper gir mobilbrukere et tastatur som passer til det de skal angi, for eksempel et numerisk tastatur for telefonnummer, men de kan også utløse validering på klientsiden.
- Godta det meste av inndata fra brukerne, så lenge det er forståelig. Eksempler kan være kontonummer med punktum, telefonnummer med mellomrom eller mellomrom på slutten av en e-postadresse.
- Pass på at brukerne ser inndata som formateres automatisk, men uten at det forstyrrer dem mens de fyller ut.
- Ikke bruk bare store bokstaver eller kursiv tekst i ledeteksten. Det er vanskelig å lese.

<br/>

## Tekst i komponenten

Det skal alltid være ledetekst på `textfield`. I spesielle tilfeller kan vi skjule ledeteksten ved å ikke sende inn `label`. Det kan for eksempel være i tabeller, hvis feltet får ledeteksten fra tabelloverskriften. Selv om vi har tenkt å skjule ledeteksten, må vi alltid skrive en ledetekst som gir mening, siden den leses opp av skjermlesere.

<br />
- Hold ledeteksten kort, unngå at den går over to linjer.
- Unngå å legge til beskrivelse som ikke er relevant eller meningsfull for brukeren.
- Unngå å bruke kolon etter `label`.

<br />

## Tilgjengelighet

### Ikke bruk deaktiverte felt

Ikke bruk deaktivert tilstand (`disabled`) på tekstfelt. Tenk heller over om du trenger å vise feltet i det hele tatt, eller om du heller kan skrive informasjonen ut i ren tekst eller bruke `readonly`.

### Prefiks og suffiks

Prefiks og suffiks er et ekstra visuelt hjelpemiddel, som blir ignorert av skjermlesere. Vi må alltid ha en beskrivende ledetekst. Prefiks og suffiks er plassert utenfor inndatafeltene de tilhører. Da unngår vi at de ikke skaper trøbbel i noen nettlesere, som kan sette inn et ikon i inndatafeltet (for eksempel ikoner for å vise eller lage passord).
