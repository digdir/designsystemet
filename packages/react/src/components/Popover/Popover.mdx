import { Meta, Canvas, Controls, Primary } from '@storybook/blocks';

import * as PopoverStories from './Popover.stories.tsx';

<Meta of={PopoverStories} />

# Popover

<Primary />
<Controls />

## Slik bruker du `Popover`

```tsx
import '@digdir/designsystemet-theme/brand/altinn/tokens.css'; // Importeres kun en gang i appen din.
import { Popover } from '@digdir/designsystemet-react';

<Popover>
  <Popover.Trigger>Trigger</Popover.Trigger>
  <Popover.Content>Content</Popover.Content>
</Popover.Trigger>
```

### Alternativ `anchorEl`

Alternativt kan du bruke `anchorEl` for å styre hvor `Popover` skal vises, men da må du selv håndtere tilstand for åpning/lukking og attributter for tilgjengelighet.

_`anchorEl` vil bli fjernet i fremtiden, og vi anbefaler å bruke `Popover.Trigger` istedenfor._

```tsx
import '@digdir/designsystemet-theme/brand/altinn/tokens.css'; // Importeres kun en gang i appen din.
import { Popover } from '@digdir/designsystemet-react';

const anchorEl = useRef(null);

<Button ref={anchorEl}>Trigger</Button>

<Popover anchorEl={anchorEl}>
  <Popover.Content>
    Content
  </Popover.Content>
</Popover>;
```

## Eksempler

### Variants

`Popover` har fire varianter, `default`, `info`, `warning` og `danger`. Du kan bruke `variant` for å endre varianten.

<Canvas of={PopoverStories.Variants} />

### Kontrollert

Dersom du sender inn `open`, så bruker du `Popover` kontrollert. Du kan bruke `onClose` for å få beskjed når `Popover` vil lukkes.
Dette er nyttig dersom du har innhold som skal lukke `Popover` når du klikker på det.

<Canvas of={PopoverStories.Controlled} />

### I Portal

<Canvas of={PopoverStories.InPortal} />

## Tilgjengelighet

Dersom du bruker `Popover.Trigger` er det innebyd tilgjengelighet.

Brukes `anchorEl` må du sørge for å legge på `aria-expanded={true/false}`, i henhold til åpne/lukket tilstand, på trigger elementet.

<Canvas of={PopoverStories.AnchorEl} />

## `Popover.Trigger`

Med `Popover.Trigger` kan du styre hvordan triggeren til `Popover` skal vises. Du kan bruke `asChild` for å endre hvordan `Popover.Trigger` rendres.
Dersom du skal legge på funksjoner som `onClick`, legg det på ditt element, og legg `asChild` på `Popover.Trigger`.
Triggeren rendres som [Button](/docs/felles-button--docs) som standard.

Dette vil rendre ein input som triggeren din:

```tsx
<Popover.Trigger asChild>
  <input ... />
</Popover.Trigger>
```

### Referanser

- [1] [Popover - React Aria](https://react-spectrum.adobe.com/react-aria/Popover.html)
- [2] [w3.org Dialog](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/)
