import { Meta, Canvas, Controls, Primary, ArgTypes } from '@storybook/blocks';

import * as DropdownMenuStories from './DropdownMenu.stories';

import { DropdownMenu } from './';

<Meta of={DropdownMenuStories} />

# DropdownMenu

<Primary />
<Controls />

## Slik bruker du `DropdownMenu`

```tsx
import { DropdownMenu } from '@digdir/designsystemet-react';

// med context
<DropdownMenu.Context>
  <DropdownMenu.Trigger>Trigger</DropdownMenu.Trigger>
  <DropdownMenu>
    <DropdownMenu.Heading>Heading</DropdownMenu.Heading>
    <DropdownMenu.List>
      <DropdownMenu.Item>Item</DropdownMenu.Item>
    </DropdownMenu.List>
  </DropdownMenu>
</DropdownMenu.Context>

// uten context
<Button popovertarget="my-dropdown">Trigger</Button>
<Dropdown id="my-dropdown">
  <DropdownMenu.Heading>Heading</DropdownMenu.Heading>
  <DropdownMenu.List>
    <DropdownMenu.Item>Item</DropdownMenu.Item>
  </DropdownMenu.List>
</Dropdown>
```

## Eksempler på bruk

### Kontrollert

Dersom du sender inn `open`, så bruker du `DropdownMenu` kontrollert. Du kan bruke `onClose` for å få beskjed når `DropdownMenu` vil lukkes.

<Canvas of={DropdownMenuStories.Controlled} />

### Ikoner

Du kan legge ikon rett inn i `DropdownMenu.Item`, dersom det blir mye mellomrom til kanten kan du legge på din egen klasse og endre på `padding`.

<Canvas of={DropdownMenuStories.Icons} />

### Uten Trigger

`DropdownMenu` bruker popover APIet, så du kan bruke `DropdownMenu` uten `DropdownMenu.Trigger`.
Du må da legge til `popovertarget={id}` på `DropdownMenu`, og `id` på `DropdownMenu`.

<Canvas of={DropdownMenuStories.WithoutTrigger} />

## Tilgjengelighet

Det er innebygd tilgjengelighet i `DropdownMenu.Trigger` med `aria-expanded={true/false}` i henhold til åpne/lukket tilstand, og `aria-haspopup='menu'`.

### `DropdownMenu.List`

<ArgTypes of={DropdownMenu.List} />

### `DropdownMenu.Trigger`

Triggeren er en [Button](/docs/komponenter-button--docs) som standard.

Bruk `DropdownMenu.Trigger` til å aktivere `DropdownMenu`. Du kan bruke `asChild` for å endre `DropdownMenu.Trigger` elementet.
Dersom du skal legge på funksjoner som `onClick`, legg det på ditt element, og legg `asChild` på `DropdownMenu.Trigger`.

### Referanser

Vi bruker `ul` og `li` tags i dropdownen, valget er basert på denne:

- https://www.w3.org/WAI/tutorials/menus/flyout/#flyoutnavkbbtn
- https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/
