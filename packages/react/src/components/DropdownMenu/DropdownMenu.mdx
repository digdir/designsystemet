import { Meta, Canvas, Controls, Primary, ArgsTable } from '@storybook/blocks';

import * as DropdownMenuStories from './DropdownMenu.stories';

import { DropdownMenu } from './';

<Meta of={DropdownMenuStories} />

# Dropdown

<Primary />
<Controls />

## Slik bruker du `DropdownMenu`

```tsx
import '@digdir/design-system-tokens/brand/altinn/tokens.css'; // Importeres kun en gang i appen din.
import { DropdownMenu } from '@digdir/design-system-react';

<DropdownMenu>
  <DopdownMenu.Trigger>Trigger</DopdownMenu.Trigger>
  <DropdownMenu.Content>
    <DropdownMenu.Group>
      <DropdownMenu.Item>Item</DropdownMenu.Item>
    </DropdownMenu.Group>
  </DropdownMenu.Content>
</DropdownMenu>;
```

## Eksempler på bruk

### Kontrollert

Dersom du sender inn `open`, så bruker du `DropdownMenu` kontrollert. Du kan bruke `onClose` for å få beskjed når `DropdownMenu` vil lukkes.

<Canvas of={DropdownMenuStories.Controlled} />

### Ikoner

Du kan legge ikon rett inn i `DropdownMenu.Item`, dersom det blir mye mellomrom til kanten kan du legge på din egen klasse og endre på `padding`.

<Canvas of={DropdownMenuStories.Icons} />

### I portal

Legg på `portal` for å rendere `DropdownMenu` i en portal. Dette flytter dropdownen til `body`.

<Canvas of={DropdownMenuStories.InPortal} />

## Tilgjengelighet

Brukes `DropdownMenu.Trigger` er det innebygd tilgjengelighet.

Brukes `anchorEl` må du sørge for å legge på `aria-expanded={true/false}` i henhold til åpne/lukket tilstand og `aria-haspopup='menu'` på trigger elementet.

### `anchorEl`

_Dette vil bli fjernet i fremtiden, og vi anbefaler å bruke `DropdownMenu.Trigger` istedenfor._

Du kan bruke `anchorEl` istedenfor `DropdownMenu.Trigger` for å styre hvor `DropdownMenu` skal vises, men da må du styre åpning og lukking av `DropdownMenu` selv.
Vi anbefaler å bruke `DropdownMenu.Trigger` istedenfor `anchorEl` fordi det er bygd inn tilgjenelighetshåndtering for deg.

<Canvas of={DropdownMenuStories.WithAnchorEl} />

### `DropdownMenu.Group`

<ArgsTable of={DropdownMenu.Group} />

### `DropdownMenu.Trigger`

Med `DropdownMenu.Trigger` kan du styre hvordan triggeren til `DropdownMenu` skal vises. Du kan bruke asChild for å endre hvordan `DropdownMenu.Trigger` rendres.
Dersom du skal legge på funksjoner som `onClick`, legg det på ditt element, og legg asChild på `DropdownMenu.Trigger`. Triggeren rendrer `Button` som standard.

### Referanser

Vi bruker `ul` og `li` tags i dropdownen, valget er basert på denne:

- https://www.w3.org/WAI/tutorials/menus/flyout/#flyoutnavkbbtn
- https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/
