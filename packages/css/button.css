.ds-button {
  --dsc-button-background--active: var(--ds-color-accent-base-active);
  --dsc-button-background--hover: var(--ds-color-accent-base-hover);
  --dsc-button-background: var(--ds-color-accent-base-default);
  --dsc-button-color: var(--ds-color-accent-contrast-default);
  --dsc-button-font-size: var(--ds-font-size-5);
  --dsc-button-gap: var(--ds-spacing-2);
  --dsc-button-icon-adjust: calc(var(--dsc-button-padding-block) - var(--dsc-button-padding-inline));
  --dsc-button-padding-block: var(--ds-spacing-2);
  --dsc-button-padding-inline: var(--ds-spacing-4);
  --dsc-button-size: var(--ds-sizing-12);

  align-items: center;
  background: var(--dsc-button-background);
  border-radius: var(--ds-border-radius-md);
  border: var(--ds-border-width-default) solid var(--dsc-button-border-color, transparent);
  box-sizing: border-box;
  color: var(--dsc-button-color);
  cursor: pointer;
  display: flex;
  font-family: inherit;
  font-size: var(--dsc-button-font-size); /* Replace with composes paragraph-md */
  line-height: var(--ds-line-height-sm); /* Replace with composes paragraph-md */
  gap: calc(var(--dsc-button-gap) + var(--dsc-button-icon-adjust) * -1); /* Add icon adjust spacing to achieve correct gap */
  justify-content: center;
  min-height: var(--dsc-button-size);
  min-width: var(--dsc-button-size);
  outline: none;
  padding: var(--dsc-button-padding-block) var(--dsc-button-padding-inline);
  text-align: inherit;
  text-decoration: none;

  & > svg {
    margin-inline: var(--dsc-button-icon-adjust); /* Add negative margin so icon only button becomes square */
  }

  &[data-ds-size="sm"] {
    --dsc-button-font-size: var(--ds-font-size-4); /* Replace with composes paragraph-sm */
    --dsc-button-gap: var(--ds-sizing-1);
    --dsc-button-padding-block: var(--ds-spacing-2);
    --dsc-button-padding-inline: var(--ds-spacing-3);
    --dsc-button-size: var(--ds-sizing-10);
  }

  &[data-ds-size="lg"] {
    --dsc-button-font-size: var(--ds-font-size-6); /* Replace with composes paragraph-lg */
    --dsc-button-padding-block: var(--ds-spacing-3);
    --dsc-button-padding-inline: var(--ds-spacing-5);
    --dsc-button-size: var(--ds-sizing-14);
  }

  &[data-ds-fill] {
    width: 100%;
    text-align: center;
  }

  /**
    * Variants
    */
  &[data-ds-variant="secondary"] {
    --dsc-button-background--active: var(--ds-color-accent-surface-hover);
    --dsc-button-background--hover: var(--ds-color-accent-surface-default);
    --dsc-button-background: transparent;
    --dsc-button-border-color: var(--ds-color-accent-border-strong);
    --dsc-button-color--active: var(--ds-color-accent-text-default);
    --dsc-button-color--hover: var(--ds-color-accent-text-default);
    --dsc-button-color: var(--ds-color-accent-text-subtle);
  }

  &[data-ds-variant="tertiary"] {
    --dsc-button-background--active: var(--ds-color-accent-surface-hover);
    --dsc-button-background--hover: var(--ds-color-accent-surface-default);
    --dsc-button-background: transparent;
    --dsc-button-border-color: var(--dsc-button-tertiary-border-color);
    --dsc-button-color--active: var(--ds-color-accent-text-default);
    --dsc-button-color--hover: var(--ds-color-accent-text-default);
    --dsc-button-color: var(--ds-color-accent-text-subtle);
  }

  /**
    * Colors
    */
  &[data-ds-color="neutral"] {
    --dsc-button-background--active: var(--ds-color-neutral-base-active);
    --dsc-button-background--hover: var(--ds-color-neutral-base-hover);
    --dsc-button-background: var(--ds-color-neutral-base-default);
    --dsc-button-color: var(--ds-color-neutral-contrast-default);
  }

  &[data-ds-color="neutral"][data-ds-variant="secondary"] {
    --dsc-button-background--active: var(--ds-color-neutral-surface-hover);
    --dsc-button-background--hover: var(--ds-color-neutral-surface-default);
    --dsc-button-background: transparent;
    --dsc-button-border-color: var(--ds-color-neutral-border-strong);
    --dsc-button-color--active: var(--ds-color-neutral-text-default);
    --dsc-button-color--hover: var(--ds-color-neutral-text-default);
    --dsc-button-color: var(--ds-color-neutral-text-subtle);
  }

  &[data-ds-color="neutral"][data-ds-variant="tertiary"] {
    --dsc-button-background--active: var(--ds-color-neutral-surface-hover);
    --dsc-button-background--hover: var(--ds-color-neutral-surface-default);
    --dsc-button-background: transparent;
    --dsc-button-color--active: var(--ds-color-neutral-text-default);
    --dsc-button-color--hover: var(--ds-color-neutral-text-default);
    --dsc-button-color: var(--ds-color-neutral-text-subtle);
  }

  &[data-ds-color="danger"] {
    --dsc-button-background--active: var(--ds-color-danger-base-active);
    --dsc-button-background--hover: var(--ds-color-danger-base-hover);
    --dsc-button-background: var(--ds-color-danger-base-default);
    --dsc-button-color: var(--ds-color-danger-contrast-default);
  }

  &[data-ds-color="danger"][data-ds-variant="secondary"] {
    --dsc-button-background--active: var(--ds-color-danger-surface-hover);
    --dsc-button-background--hover: var(--ds-color-danger-surface-default);
    --dsc-button-background: transparent;
    --dsc-button-border-color: var(--ds-color-danger-border-strong);
    --dsc-button-color--active: var(--ds-color-danger-text-default);
    --dsc-button-color--hover: var(--ds-color-danger-text-default);
    --dsc-button-color: var(--ds-color-danger-text-subtle);
  }

  &[data-ds-color="danger"][data-ds-variant="tertiary"] {
    --dsc-button-background--active: var(--ds-color-danger-surface-hover);
    --dsc-button-background--hover: var(--ds-color-danger-surface-default);
    --dsc-button-background: transparent;
    --dsc-button-color--active: var(--ds-color-danger-text-default);
    --dsc-button-color--hover: var(--ds-color-danger-text-default);
    --dsc-button-color: var(--ds-color-danger-text-subtle);
  }

  /**
    * States
    */

  @media (hover: hover) and (pointer: fine) { /* Only use hover for non-touch devices to prevent sticky-hovering */
    &:not(:disabled, [aria-disabled="true"], [aria-busy="true"]):hover {
      background: var(--dsc-button-background--hover);
    }
  }

  &[aria-busy="true"]{
    cursor: progress;
  }

  &[aria-busy="true"]::before {
    background: currentcolor;
    content: '';
    height: 1.5em;
    margin-inline: var(--dsc-button-icon-adjust);
    mask: center/contain no-repeat url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cstyle%3E@keyframes rotate%7Bto%7Brotate:360deg%7D%7D@keyframes stroke%7B50%25%7Bstroke-dasharray:100,200;stroke-dashoffset:-15;transform:rotate(0deg)%7Dto%7Bstroke-dasharray:1,200;stroke-dashoffset:-120;transform:rotate(15deg)%7D%7Dcircle%7Bcx:25;cy:25;r:20;fill:none;stroke:currentcolor;stroke-width:5%7Dcircle:last-child%7Banimation:stroke ease-in-out infinite 2s,rotate linear infinite 2s;transform-origin:center%7D%3C/style%3E%3Ccircle opacity='.15'/%3E%3Ccircle stroke-dasharray='1, 200'/%3E%3C/svg%3E");
    width: 1.5em;
  }

  &:focus-visible {
    box-shadow: var(--dsc-focus-boxShadow);
  }

  &:is(:disabled, [aria-disabled="true"]) {
    cursor: not-allowed;
    opacity: var(--ds-disabled-opacity);
  }

  &:not(:disabled, [aria-disabled="true"], [aria-busy="true"]):active {
    background-color: var(--dsc-button-background--active);
  }
}

