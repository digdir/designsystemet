.ds-fieldset {
  --dsc-fieldset-gap: var(--ds-size-4);
  --_dsc-fieldset-gap--half: calc(var(--dsc-fieldset-gap) / 2);

  border: 0;
  margin: 0;
  min-width: 0;
  padding: 0;

  & > legend {
    padding: 0; /* Reset browser default padding */
  }

  /* Add lock icon to legend when only containing readonly inputs */
  &:has(input[readonly]):not(:has(input:not([readonly]))) > legend {
    @composes ds-readonly-icon from './base.css'; /* Activate lock icon for legend when all inputs are readonly */
  }

  /* Stack everything that is not directly after legend */
  & > * + * {
    padding-block: var(--_dsc-fieldset-gap--half);
  }

  & > * + :last-child {
    margin-block-end: calc(var(--_dsc-fieldset-gap--half) * -1);
  }

  & > legend + p /* Kept for backawrds compatibility */,
  & > [data-field='description'] {
    color: var(--ds-color-neutral-text-subtle);
  }
  & > legend + p /* Kept for backawrds compatibility */,
  & > legend + [data-field='description'] {
    padding-block-start: 0;
    margin-block: 0; /* Reset margin for description */
  }

  &:disabled > legend,
  &:disabled > legend + p /* Kept for backawrds compatibility */,
  &:disabled > [data-field='description'] {
    opacity: var(--ds-opacity-disabled);
  }
}
