.ds-spinner {
  --dsc-spinner-background: var(--ds-color-surface-tinted);
  --dsc-spinner-stroke: var(--ds-color-border-default);

  --dsc-spinner-animation-duration: 2s;

  animation: ds-spinner-rotate-animation linear infinite var(--dsc-spinner-animation-duration);
  box-sizing: border-box;
  font-size: var(--ds-size-11);
  height: 1em;
  width: 1em;

  /* Using font-size to ensure consistent size when explicitly setting data-size */
  &[data-size='2xs'] {
    font-size: 0.75rem;
  }

  &[data-size='xs'] {
    font-size: 1.25rem;
  }

  &[data-size='sm'] {
    font-size: 2rem;
  }

  &[data-size='md'] {
    font-size: 2.75rem;
  }

  &[data-size='lg'] {
    font-size: 3.75rem;
  }

  &[data-size='xl'] {
    font-size: 5.5rem;
  }
}

.ds-spinner__background {
  stroke: var(--dsc-spinner-background);
}

.ds-spinner__circle {
  animation: ds-spinner-stroke-animation ease-in-out infinite var(--dsc-spinner-animation-duration);
  stroke-dasharray: 1px, 200px;
  stroke: var(--dsc-spinner-stroke);
  transform-origin: center;
}

/* Prefers reduced motion needs longer animation,
but don't remove it since it is not decorative.
*/
@media (prefers-reduced-motion: reduce) {
  .ds-spinner {
    animation-duration: 6s;
  }
}

@keyframes ds-spinner-rotate-animation {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

@keyframes ds-spinner-stroke-animation {
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -120px;
  }
}

/*
Workaround for data-size meaning both "change size mode" and "set spinner size".
As long as data-size is overloaded in this way, this workaround is needed for
the component to scale based on the surrounding data-size.
*/
.ds-spinner {
  /* Default to medium no matter what size is set on the element */
  &[data-size] {
    --ds-size: var(--ds-size--md);
  }
}
/* Try using the nearest ancestor size mode */
[data-size='sm'] :not([data-size]) .ds-spinner,
[data-size='sm'] > .ds-spinner {
  --ds-size: var(--ds-size--sm);
}
[data-size='md'] :not([data-size]) .ds-spinner,
[data-size='md'] > .ds-spinner {
  --ds-size: var(--ds-size--md);
}
[data-size='lg'] :not([data-size]) .ds-spinner,
[data-size='lg'] > .ds-spinner {
  --ds-size: var(--ds-size--lg);
}
