.ds-input {
  appearance: none;
  background: var(--ds-color-neutral-background-default);
  border-radius: var(--ds-border-radius-md);
  border: var(--dsc-input-addons-border-width, 1px) solid var(--dsc-input-addons-border-color, var(--ds-color-neutral-border-default));
  box-sizing: border-box;
  color: var(--ds-color-neutral-text-default);
  display: block;
  flex: 0 1 auto; /* Prepare for placing inside ds-input-addons */
  font-family: inherit;
  height: var(--ds-sizing-12);
  padding: 0 var(--ds-spacing-3);
  position: relative; /* Place focus ring on top */

  @composes ds-focus from './utilities.css';
  @composes ds-body-text--md from './utilities.css';

  &[data-size='sm'] {
    @composes ds-body-text--sm from './utilities.css';

    height: var(--ds-sizing-10);
    padding: 0 var(--ds-spacing-2);
  }

  &[data-size='lg'] {
    @composes ds-body-text--lg from './utilities.css';

    padding: 0 var(--ds-spacing-2);
    height: var(--ds-sizing-14);
  }

  &:not([size]) {
    width: 100%;
  }

  &:disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;
    opacity: var(--ds-disabled-opacity);
  }

  &:read-only {
    background: var(--ds-color-neutral-background-subtle);
    border-color: var(--ds-color-neutral-border-strong);
  }

  &[aria-invalid='true']:not(:focus-visible) {
    border-color: var(--ds-color-danger-border-default);
    box-shadow: inset 0 0 0 1px var(--ds-color-danger-border-default);
  }

  @media (hover: hover) and (pointer: fine) {
    &:not(:focus-visible, :disabled, [aria-disabled]):hover {
      border-color: var(--ds-color-accent-border-strong);
      box-shadow: inset 0 0 0 1px var(--ds-color-accent-border-strong);
    }
  }
}

.ds-input-addons {
  --dsc-input-addons-border-color: var(--ds-color-neutral-border-default);
  --dsc-input-addons-border-width: 1px;
  --dsc-input-addons-padding: var(--ds-spacing-4);

  align-items: center;
  background: var(--ds-color-neutral-background-subtle);
  border-radius: var(--ds-border-radius-md);
  box-shadow: inset 0 0 0 var(--dsc-input-addons-border-width) var(--dsc-input-addons-border-color); /* Using box-shadow inset to allow input to render over */
  box-sizing: border-box;
  color: var(--ds-color-neutral-text-subtle);
  display: flex;
  gap: var(--dsc-input-addons-padding);
  padding-inline: var(--dsc-input-addons-padding);
  white-space: nowrap;

  @composes ds-body-text--md from './utilities.css';

  .ds-input {
    border-radius: 0;
  }

  &:has([data-size='sm']) {
    @composes ds-body-text--sm from './utilities.css';

    --dsc-input-addons-padding: var(--ds-spacing-3);
  }

  &:has([data-size='lg']) {
    @composes ds-body-text--lg from './utilities.css';

    --dsc-input-addons-padding: var(--ds-spacing-5);
  }
}
