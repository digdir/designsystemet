<Story story="Preview" />

<ReactComponentDocs />

## Usage

To add your own close button, you can either use `command="close" commandfor="DIALOG-ID"` or `ref` and `Dialog.close()` on a button you create yourself.

If the button is empty, it will get an icon.

If the button is a direct child of the dialog and the first element, it will float to the top right.

```tsx
import { Dialog, Heading, Paragraph } from '@digdir/designsystemet-react';

/* with context */
<Dialog.TriggerContext>
<Dialog.Trigger>Open Dialog</Dialog.Trigger>
<Dialog>
Dialog content
</Dialog>
</Dialog.TriggerContext>

/* without context */
<Button command="show-modal" commandfor="my-dialog">Open Dialog</Button>
<Dialog id="my-dialog">
Dialog content
</Dialog>
```

## Examples

### Med command og uten context

If you don't want to use `Dialog.TriggerContext`, you can use `command="show"` or `command="show-modal"` and `commandfor="DIALOG-ID"` to open the dialog from an external trigger.

<Story story="WithCommand" />

### With ref and without context

If you don't want to use `Dialog.TriggerContext`, you can use `ref` to open the dialog from an external trigger.
You then use native methods on the `<dialog>` element, such as `showModal()` or `show()`.
Note that you should add `aria-haspopup="dialog"` to the button that opens the dialog for better accessibility.

<Story story="WithRef" />

### With form and focus

If you want a field in a form inside the dialog to get focus when the dialog opens, you can use the native `autofocus` attribute on the input element.

When using this with React, you must write it in lowercase as `autofocus`, not `autoFocus`.

This prop does not exist in React's type definitions, so we have ignored the error with an `@ts-expect-error` comment in the example below.

<Story story="WithForm" />

### With blocks

Use multiple `Dialog.Block` if you want to divide the dialog with dividers into, for example, a top and bottom area. Note that content cannot be placed directly in `Dialog` if you use `Dialog.Block`; then all content should be inside one of the dialog's `Dialog.Block` sections.

<Story story="WithBlocks" />

### Close on click outside

We use `closedby="any"` to close the dialog when the user clicks outside.

We add polyfill so `closedby="any"` also works in older Safari.

<Story story="CloseWithClickOutside" />

## HTML

The main class name is `ds-dialog`, which is placed on the `<dialog>` element.
Blocks inside the dialog are given class names like `ds-dialog__block`.
```html
<dialog class="ds-dialog">
Content
</dialog>

<!-- with division -->
<dialog class="ds-dialog">
  <div class="ds-dialog__block">
    Header
  </div>
  <div class="ds-dialog__block">
    Content
  </div>
  <div class="ds-dialog__block">
    Footer
  </div>
</dialog>
```

In HTML, you have to connect the `<dialog>` element to a trigger yourself through `command="show"` or `command="show-modal"` and `commandfor="DIALOG-ID"`.

```html
<button command="show-dialog" commandfor="my-dialog" type="button">Open Dialog</button>
<dialog id="my-dialog" class="ds-dialog">
  <div>Content</div>
  <button command="close" commandfor="my-dialog">Close</button>
</dialog>
```

## CSS variables and data attributes
All CSS variables used by `ds-dialog__block` are set to `ds-dialog`.

<CssVariables />

<CssAttributes />
