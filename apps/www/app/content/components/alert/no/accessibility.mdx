## Implementasjonstester

1. Alert som vises dynamisk skal leses opp (WCAG 4.1.3)

    - En alert som vises eller oppdateres etter at siden er lastet, skal annonseres automatisk av skjermleser.
    - Kritiske meldinger som krever umiddelbar oppmerksomhet, skal bruke `role="alert"` (assertive).
    - Ikke-kritiske meldinger skal bruke `role="status"` (polite).

2. Alerten skal ligge riktig i strukturen (WCAG 1.3.1)

    - Alerten skal være plassert logisk i DOM i forhold til innholdet den gjelder.
    - Leserekkefølgen skal gi mening.
    - Hvis alerten inneholder en overskrift, skal den bruke riktig overskriftsnivå i sidestrukturen.

3. Teksten skal være tydelig og konkret (WCAG 2.4.6)

    - Alertens tekst skal tydelig beskrive hva meldingen gjelder og hva konsekvensen er.
    - Generiske formuleringer som «Feil» eller «Advarsel» alene er ikke tilstrekkelig.

## Alert i live region

Dersom du vil at varselet skal bli lest opp dynamisk, må du legge `Alert` i en live region. Regionen **skal være rundt** `Alert`-komponenten, ikke på den.

Ut av boksen blir `Alert` presentert for skjermleserbrukere som vanlig statisk innhold. For varsler som oppstår dynamisk kan du selv definere en *live region* for skjermlesere, men vær oppmerksom på hvilken oppførsel dette medfører. Du kan lese mer om dette i [MDN sin dokumentasjon om ARIA live regions](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Guides/Live_regions).

Legg spesielt merke til at live-regionen — altså elementet med attributt `role="alert"`, `role="status"` eller `aria-live` med verdi `"assertive"` eller `"polite"` — må eksistere på siden **før** varselet som skal leses opp.

For dynamiske varsler er det mest aktuelt å bruke `role="alert"` for kritiske varsel eller `role="status"` for mindre kritiske varsel, som beskrevet i [mønsteret for systemvarsler](/no/patterns/systemnotifications). Se også [alert role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/alert_role) og [status role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/status_role) hos MDN.

**Ikke** kombiner `role="alert"` og `aria-live`, siden [dette kan føre til at varselet leses opp dobbelt i VoiceOver (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Guides/Live_regions#:~:text=adding%20both%20aria%2Dlive%20and%20role=%22alert%22%20causes%20double%20speaking%20issues%20in%20VoiceOver%20on%20iOS).

Du **bør** kombinere `role="status"` og `aria-live="polite"` [for å maksimere kompatibilitet (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Guides/Live_regions#roles_with_implicit_live_region_attributes).

<Story story="CorrectLiveRegionReact" />

<Card data-color="info">
For statusbeskjeder, som implementeres ved hjelp av oppmerkingsspråk, gjelder følgende:

**Resultatet av en handling skal kodes med én av følgende:**

- role="status"
- aria-live="polite"

**Ventetilstand skal kodes med én av følgende:**

- role="status"
- aria-live="polite"

**Feil skal kodes med én av følgende:**

- role="alert"
- aria-live="polite"
- aria-live="assertive"

**Fremdriften i en prosess skal kodes med én av følgende:**

- role="progressbar"
- elementet `<progress>`
- role="log"
- role="status" og aria-atomic="false"
- aria-live="polite" og aria-atomic="false"

Kilde: [4.1.3 Statusbeskjeder (Nivå AA) (uutilsynet.no)](https://www.uutilsynet.no/wcag-standarden/413-statusbeskjeder-niva-aa/152)
</Card>
